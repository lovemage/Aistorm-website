<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AIStormÂïÜÂ∫ó - Ë¥≠‰π∞ChatGPT Pro„ÄÅClaude Max„ÄÅSuper GrokÁ≠âAIË¥¶Âè∑ÊúçÂä°ÔºåÊîØÊåÅUSDTÊîØ‰ªò">
    <meta name="keywords" content="AIStormÂïÜÂ∫ó, ChatGPTË¥≠‰π∞, ClaudeË¥¶Âè∑, AIË¥¶Âè∑Ë¥≠‰π∞, USDTÊîØ‰ªò">
    <title>AIStorm ÂïÜÂ∫ó - Ë¥≠‰π∞AIË¥¶Âè∑ÊúçÂä°</title>
    <link rel="icon" href="../assets/images/logo.jpeg">
    
    <!-- Áªü‰∏ÄËÆæËÆ°Á≥ªÁªü -->
    <link rel="stylesheet" href="../assets/css/unified-design-system.css">
    <link rel="stylesheet" href="../assets/css/icons.css">
    
    <style>
        /* ÂïÜÂ∫óÈ°µÈù¢ÁâπÂÆöÊ†∑ÂºèÔºåÂü∫‰∫éÊñ∞ËÆæËÆ°Á≥ªÁªü */
        .shop-nav {
            background: var(--color-surface);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: var(--z-fixed);
            padding: var(--spacing-md) 0;
            transition: all var(--transition-base);
        }
        
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }
        
        .nav-logo {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            text-decoration: none;
            color: var(--color-primary);
            font-weight: 600;
            font-size: var(--font-size-lg);
            transition: color var(--transition-base);
        }
        
        .nav-logo:hover {
            color: var(--color-primary-hover);
        }
        
        .nav-links {
            display: flex;
            gap: var(--spacing-xl);
            align-items: center;
        }
        
        .nav-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: color var(--transition-base);
            font-size: var(--font-size-base);
            font-weight: 500;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--color-primary);
        }
        
        /* È°µÈù¢Â§¥ÈÉ® */
        .shop-header {
            background: url('../assets/images/aistore_main.png?v=1');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: var(--spacing-4xl) 0;
            text-align: center;
            margin-bottom: var(--spacing-3xl);
            border-bottom: 2px solid var(--color-primary);
            position: relative;
            min-height: 60vh;
            display: flex;
            align-items: center;
        }
        
        .shop-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(2px);
            z-index: 1;
        }
        
        .shop-header .container {
            position: relative;
            z-index: 2;
            width: 100%;
        }
        
        .shop-header h1 {
            color: var(--color-primary);
            font-size: var(--font-size-4xl);
            font-weight: 700;
            margin: 0 0 var(--spacing-lg) 0;
            text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
        }
        
        .shop-header p {
            color: var(--color-text-primary);
            font-size: var(--font-size-lg);
            margin: 0 0 var(--spacing-2xl) 0;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }
        
        .shop-header .shop-cta {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-md);
            background: var(--color-primary);
            color: white;
            padding: var(--spacing-lg) var(--spacing-2xl);
            border-radius: var(--radius-full);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--font-size-lg);
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-base);
            border: 2px solid var(--color-primary);
        }
        
        .shop-header .shop-cta:hover {
            background: var(--color-primary-hover);
            border-color: var(--color-primary-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }
        
        .shop-header .shop-cta::after {
            content: 'üõí';
            font-size: var(--font-size-xl);
        }
        
        /* Ë¥≠‰π∞Ë°®Âçï */
        .purchase-form {
            background: var(--color-surface);
            border-radius: var(--radius-xl);
            padding: var(--spacing-3xl);
            margin-bottom: var(--spacing-3xl);
            border: 1px solid var(--color-border);
            box-shadow: var(--shadow-lg);
        }
        
        .form-section {
            margin-bottom: var(--spacing-3xl);
        }
        
        .form-section h3 {
            color: var(--color-primary);
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .step-number {
            background: var(--color-primary);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: var(--font-size-sm);
        }
        
        /* ‰∫ßÂìÅÁΩëÊ†º */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-lg);
        }
        
        .product-option {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            cursor: pointer;
            transition: all var(--transition-base);
            position: relative;
        }
        
        .product-option:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .product-option.selected {
            border-color: var(--color-primary);
            background: var(--color-primary-light);
            box-shadow: var(--shadow-lg);
        }
        
        .product-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .product-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--spacing-lg) auto;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: var(--radius-lg);
            border: 2px solid var(--color-primary);
            transition: all var(--transition-base);
        }
        
        .product-option:hover .product-icon {
            transform: scale(1.05);
        }
        
        .product-option.selected .product-icon {
            box-shadow: 0 0 20px var(--color-primary-light);
        }
        
        /* Áº∫Ë¥ß‰∫ßÂìÅÊ†∑Âºè */
        .product-option.out-of-stock {
            opacity: 0.6;
            background: #2a2a2a;
            border-color: #555;
            cursor: not-allowed;
        }
        
        .product-option.out-of-stock:hover {
            transform: none;
            border-color: #555;
        }
        
        .product-option.out-of-stock .product-title {
            color: #888;
        }
        
        .product-option.out-of-stock .product-icon {
            filter: grayscale(100%);
            opacity: 0.5;
        }
        
        .product-title {
            color: var(--color-primary);
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            text-align: center;
        }
        
        .product-description {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-md);
            text-align: center;
            line-height: var(--line-height-relaxed);
        }
        
        .product-price {
            color: var(--color-success);
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            text-align: center;
        }
        
        .product-price-rmb {
            color: var(--color-primary);
            font-size: var(--font-size-base);
            text-align: center;
        }
        
        /* Êï∞ÈáèÈÄâÊã©Âô® */
        .quantity-selector {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .quantity-label {
            color: var(--color-text-primary);
            font-size: var(--font-size-base);
            font-weight: 500;
            min-width: 80px;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            background: var(--color-surface);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
        }
        
        .quantity-btn {
            background: transparent;
            border: none;
            color: var(--color-primary);
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: var(--font-size-lg);
            font-weight: 600;
            transition: background var(--transition-base);
        }
        
        .quantity-btn:hover {
            background: var(--color-primary-light);
        }
        
        .quantity-btn:disabled {
            color: var(--color-text-muted);
            cursor: not-allowed;
        }
        
        .quantity-input {
            background: transparent;
            border: none;
            color: var(--color-text-primary);
            text-align: center;
            width: 60px;
            height: 40px;
            font-size: var(--font-size-base);
        }
        
        /* ÊîØ‰ªòÊñπÂºè */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-xl);
        }
        
        .payment-option {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            cursor: pointer;
            transition: all var(--transition-base);
            text-align: center;
        }
        
        .payment-option:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
        }
        
        .payment-option.selected {
            border-color: var(--color-primary);
            background: var(--color-primary-light);
        }
        
        .payment-option input[type="radio"] {
            display: none;
        }
        
        .payment-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--spacing-lg) auto;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: var(--radius-lg);
            border: 2px solid var(--color-primary);
            transition: all var(--transition-base);
        }
        
        .payment-option:hover .payment-icon {
            transform: scale(1.05);
        }
        
        .payment-option.selected .payment-icon {
            box-shadow: 0 0 20px var(--color-primary-light);
        }
        
        .usdt-icon {
            background-image: url('../assets/images/USDT.png');
            background-color: #26a17b;
        }
        
        .alipay-icon {
            background-image: url('../assets/images/alipay.png');
            background-color: #1677ff;
        }
        
        .payment-title {
            color: var(--color-primary);
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }
        
        .payment-description {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }
        
        /* ÈÇÆÁÆ±ËæìÂÖ• */
        .email-input {
            width: 100%;
            max-width: 400px;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            color: var(--color-text-primary);
            font-size: var(--font-size-base);
            transition: all var(--transition-base);
        }
        
        .email-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-primary-light);
        }
        
        .email-input::placeholder {
            color: var(--color-text-muted);
        }
        
        /* ËÆ¢ÂçïÊëòË¶Å */
        .order-summary {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            margin-top: var(--spacing-2xl);
            border: 1px solid var(--color-border);
            display: none;
            box-shadow: var(--shadow-lg);
        }
        
        .order-summary.show {
            display: block;
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .summary-title {
            color: var(--color-primary);
            font-size: var(--font-size-2xl);
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }
        
        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .summary-label {
            color: var(--color-text-secondary);
            font-weight: 500;
        }
        
        .summary-value {
            color: var(--color-text-primary);
            font-weight: 600;
        }
        
        .total-amount {
            background: var(--color-success-light);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            margin: var(--spacing-lg) 0;
            text-align: center;
            border: 1px solid var(--color-success);
        }
        
        .total-usdt {
            color: var(--color-success);
            font-size: var(--font-size-2xl);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }
        
        .total-rmb {
            color: var(--color-primary);
            font-size: var(--font-size-lg);
        }
        
        /* ÊîØ‰ªòÊìç‰ΩúÊåâÈíÆ */
        .payment-actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin-top: var(--spacing-lg);
            flex-wrap: wrap;
        }
        
        /* ÊîØ‰ªòËØ¶ÊÉÖÂå∫Âüü */
        .payment-details-section {
            margin-top: var(--spacing-3xl);
            animation: slideDown 0.3s ease-out;
        }
        
        .payment-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
        }
        
        .info-card {
            background: var(--color-bg);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
        }
        
        .info-card label {
            display: block;
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-xs);
        }
        
        .info-card span {
            color: var(--color-primary);
            font-weight: 600;
            font-size: var(--font-size-base);
        }
        
        .qr-payment-container {
            display: flex;
            justify-content: center;
            margin: var(--spacing-2xl) 0;
        }
        
        .qr-code-section {
            text-align: center;
            max-width: 400px;
            width: 100%;
        }
        
        .qr-container {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            border: 1px solid var(--color-border);
        }
        
        .qr-container.iframe-container {
            background: transparent;
            padding: 0;
            min-height: auto;
        }
        
        .loading-placeholder {
            color: var(--color-text-muted);
            text-align: center;
        }
        
        /* iframe ÊîØ‰ªòÈ°µÈù¢Ê†∑Âºè */
        .payment-iframe-container {
            background: white;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 2px solid var(--color-primary);
        }
        
        .payment-iframe {
            width: 100%;
            height: 800px;
            border: none;
            border-radius: var(--radius-md);
            opacity: 0.9;
            transition: opacity var(--transition-base);
        }
        
        .iframe-header {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            text-align: center;
            font-weight: 600;
            font-size: var(--font-size-sm);
        }
        
        .iframe-fallback {
            text-align: center;
            padding: var(--spacing-xl);
            background: var(--color-surface);
            border-radius: var(--radius-md);
            margin-top: var(--spacing-sm);
        }
        
        .copy-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-weight: 600;
            transition: background var(--transition-base);
        }
        
        .copy-button:hover {
            background: var(--color-primary-hover);
        }
        
        .payment-status {
            color: var(--color-warning);
            font-size: var(--font-size-lg);
            font-weight: 600;
        }
        
        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--color-border);
            border-radius: 50%;
            border-top-color: var(--color-primary);
            animation: spin 1s ease-in-out infinite;
            margin-right: var(--spacing-sm);
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ‰∫ßÂìÅÂõæÊ†áÁ±ª */
        .icon-chatgpt { background-image: url('../assets/images/chatgptpro.jpg'); }
        .icon-claude { background-image: url('../assets/images/claudemax.jpg'); }
        .icon-grok { background-image: url('../assets/images/grokpro.jpg'); }
        .icon-cursor { background-image: url('../assets/images/curserpro.jpeg'); }
        .icon-lovable { background-image: url('../assets/images/lovable.png'); }
        .icon-combo { background-image: url('../assets/images/logo.jpeg'); }
        
        .icon-default {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xl);
            color: white;
            font-weight: 600;
        }
        
        /* Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .qrcode-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: var(--z-modal);
        }
        
        .qrcode-content {
            background: var(--color-surface);
            padding: var(--spacing-3xl);
            border-radius: var(--radius-xl);
            text-align: center;
            border: 2px solid var(--color-primary);
            box-shadow: var(--shadow-xl);
            max-width: 90vw;
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .qrcode-content h3 {
            color: var(--color-primary);
            margin-bottom: var(--spacing-lg);
        }
        
        .qrcode-content img {
            max-width: 250px;
            max-height: 250px;
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-lg);
        }
        
        .close-modal {
            background: var(--color-text-muted);
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-lg);
            border-radius: var(--radius-md);
            cursor: pointer;
            margin-top: var(--spacing-md);
        }
        
            .nav-content {
                flex-direction: column;
                gap: var(--spacing-md);
                padding: 0 var(--spacing-md);
            }
            
            .nav-links {
                gap: var(--spacing-md);
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .shop-nav {
                position: sticky;
                top: 0;
                z-index: var(--z-fixed-plus);
                padding: var(--spacing-sm) 0;
            }
            
            .nav-logo {
                font-size: var(--font-size-base);
            }
            
            .nav-link {
                font-size: var(--font-size-sm);
                padding: var(--spacing-xs) var(--spacing-md);
                border-radius: var(--radius-full);
                transition: background-color var(--transition-base);
            }
            
            .nav-link:hover {
                background-color: var(--color-primary-light);
            }
            
            .purchase-form {
                padding: var(--spacing-xl);
            }
            
            .product-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
            
            .payment-methods {
                grid-template-columns: 1fr;
            }
            
            .payment-actions {
                flex-direction: column;
            }
            
            .qrcode-content {
                padding: var(--spacing-xl);
                max-width: 95vw;
                max-height: 90vh;
            }
            
            .qrcode-content img {
                max-width: 200px;
                max-height: 200px;
            }
            
            .payment-iframe {
                height: 700px;
            }
            
            .qr-payment-container {
                grid-template-columns: 1fr;
            }
            
            .payment-iframe-container {
                grid-column: 1 / -1;
                margin-bottom: var(--spacing-md);
            }
            
            .payment-info-grid {
                grid-template-columns: 1fr;
            }
            
            .payment-methods {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav class="nav">
        <div class="container nav-container">
            <div class="nav-logo">
                <img src="../assets/images/logo.jpeg" alt="AIStorm Logo" style="width: 32px; height: 32px; border-radius: 50%; margin-right: 12px;">
                AIStorm
            </div>
            
            <!-- Ê°åÈù¢Á´ØÂØºËà™ÈìæÊé• -->
            <div class="nav-links">
                <a href="/" class="nav-link">È¶ñÈ°µ</a>
                <a href="shop.html" class="nav-link active">ÂïÜÂ∫ó</a>
                <a href="ai_news.html" class="nav-link">AIÊñ∞Èóª</a>
                <a href="/#contact" class="nav-link">ËÅîÁ≥ª</a>
            </div>
            
            <!-- Âè≥‰æßÊìç‰ΩúÂå∫Âüü -->
            <div class="nav-actions">
                <button class="theme-toggle" aria-label="ÂàáÊç¢‰∏ªÈ¢ò">üåô</button>
                <a href="shop.html" class="btn btn-primary">Ë¥≠‰π∞ÊúçÂä°</a>
                
                <!-- Ê±âÂ†°ËèúÂçïÊåâÈíÆ (‰ªÖÁßªÂä®Á´ØÊòæÁ§∫) -->
                <button class="nav-toggle" aria-label="ÂàáÊç¢ÂØºËà™ËèúÂçï">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
        
        <!-- ÊâãÊú∫Á´Ø‰∏ãÊãâËèúÂçï -->
        <div class="nav-dropdown">
            <div class="nav-dropdown-links">
                <a href="/" class="nav-dropdown-link">È¶ñÈ°µ</a>
                <a href="shop.html" class="nav-dropdown-link active">ÂïÜÂ∫ó</a>
                <a href="ai_news.html" class="nav-dropdown-link">AIÊñ∞Èóª</a>
                <a href="/#contact" class="nav-dropdown-link">ËÅîÁ≥ª</a>
            </div>
            <div class="nav-dropdown-actions">
                <a href="shop.html" class="btn btn-primary">Ë¥≠‰π∞ÊúçÂä°</a>
            </div>
        </div>
    </nav>

    <!-- È°µÈù¢Â§¥ÈÉ® -->
    <header class="shop-header">
        <div class="container">
            <h1>AIStorm ÂïÜÂ∫ó</h1>
            <p>ÈÄâÊã©ÊÇ®ÈúÄË¶ÅÁöÑAIË¥¶Âè∑ÊúçÂä°Ôºå‰∫´ÂèóÊô∫ËÉΩÁîüÊ¥ª</p>
            <a href="#productGrid" class="shop-cta">Á´ãÂç≥ÈÄâË¥≠ AI Ë¥¶Âè∑</a>
        </div>
    </header>

    <div class="container">
        <form class="purchase-form" id="purchaseForm">
            <!-- Ê≠•È™§1: ÈÄâÊã©‰∫ßÂìÅ -->
            <div class="form-section">
                <h3>
                    <span class="step-number">1</span>
                    ÈÄâÊã©AI‰∫ßÂìÅ
                </h3>
                <div class="product-grid" id="productGrid">
                    <!-- ‰∫ßÂìÅÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂä†ËΩΩ -->
                    <div style="text-align: center; color: var(--color-text-muted); grid-column: 1 / -1;">
                        <div class="loading"></div>
                        Ê≠£Âú®Âä†ËΩΩ‰∫ßÂìÅ‰ø°ÊÅØ...
                    </div>
                </div>
            </div>

            <!-- Ê≠•È™§2: ÈÄâÊã©Êï∞Èáè -->
            <div class="form-section">
                <h3>
                    <span class="step-number">2</span>
                    ÈÄâÊã©Ë¥≠‰π∞Êï∞Èáè
                </h3>
                <div class="quantity-selector">
                    <span class="quantity-label">Êï∞Èáè:</span>
                    <div class="quantity-controls">
                        <button type="button" class="quantity-btn" id="decreaseBtn" onclick="changeQuantity(-1)">-</button>
                        <input type="number" class="quantity-input" id="quantityInput" value="1" min="1" max="5" readonly>
                        <button type="button" class="quantity-btn" id="increaseBtn" onclick="changeQuantity(1)">+</button>
                    </div>
                    <span style="color: var(--color-text-muted); font-size: var(--font-size-sm);">(ÊúÄÂ§ö5‰∏™)</span>
                </div>
            </div>

            <!-- Ê≠•È™§3: ÈÄâÊã©ÊîØ‰ªòÊñπÂºè -->
            <div class="form-section">
                <h3>
                    <span class="step-number">3</span>
                    ÈÄâÊã©ÊîØ‰ªòÊñπÂºè
                </h3>
                <div class="payment-methods">
                    <label class="payment-option" for="usdt">
                        <input type="radio" id="usdt" name="paymentMethod" value="usdt">
                        <div class="payment-icon usdt-icon"></div>
                        <div class="payment-title">USDT Âä†ÂØÜÊîØ‰ªò</div>
                        <div class="payment-description">ÂÆâÂÖ®ÁöÑÂä†ÂØÜË¥ßÂ∏ÅÊîØ‰ªòÔºåÈÄöËøá Oxapay ÁîüÊàêËÆ¢Âçï</div>
                    </label>
                    <label class="payment-option" for="alipay">
                        <input type="radio" id="alipay" name="paymentMethod" value="alipay">
                        <div class="payment-icon alipay-icon"></div>
                        <div class="payment-title">ÊîØ‰ªòÂÆùÂè£‰ª§Á∫¢ÂåÖ</div>
                        <div class="payment-description">ÂæÆ‰ø°Êâ´Á†ÅËÅîÁ≥ªÂÆ¢Êúç</div>
                    </label>
                </div>
            </div>

            <!-- Ê≠•È™§4: ËÅîÁ≥ªÈÇÆÁÆ± -->
            <div class="form-section">
                <h3>
                    <span class="step-number">4</span>
                    ËÅîÁ≥ªÈÇÆÁÆ±
                </h3>
                <input type="email" class="email-input" id="emailInput" placeholder="ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈÇÆÁÆ±Âú∞ÂùÄ" required>
                <p style="color: var(--color-text-muted); font-size: var(--font-size-sm); margin-top: var(--spacing-xs);">Êàë‰ª¨Â∞ÜÈÄöËøáÊ≠§ÈÇÆÁÆ±ÂêëÊÇ®ÂèëÈÄÅË¥¶Âè∑‰ø°ÊÅØ</p>
            </div>

            <!-- Êèê‰∫§ÊåâÈíÆ -->
            <div style="text-align: center; margin-top: var(--spacing-2xl);">
                <button type="button" class="btn btn-primary" id="generateOrderBtn" onclick="generateOrder()">
                    ÁîüÊàêËÆ¢Âçï
                </button>
            </div>
        </form>

        <!-- ËÆ¢ÂçïÊëòË¶Å -->
        <div class="order-summary" id="orderSummary">
            <h3 class="summary-title">ËÆ¢ÂçïÊëòË¶Å</h3>
            <div class="summary-item">
                <span class="summary-label">ÈÄâÊã©‰∫ßÂìÅ:</span>
                <span class="summary-value" id="summaryProduct">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Ë¥≠‰π∞Êï∞Èáè:</span>
                <span class="summary-value" id="summaryQuantity">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">ÊîØ‰ªòÊñπÂºè:</span>
                <span class="summary-value" id="summaryPayment">-</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">ËÅîÁ≥ªÈÇÆÁÆ±:</span>
                <span class="summary-value" id="summaryEmail">-</span>
            </div>
            
            <div class="total-amount">
                <div class="total-usdt" id="totalUSDT">$0 USDT</div>
                <div class="total-rmb" id="totalRMB">‚âà ¬•0</div>
            </div>

            <div class="payment-actions">
                <button type="button" class="btn btn-success" id="usdtPayBtn" onclick="processUSDTPayment()" style="display: none;">
                    ÂâçÂæÄOxaPayÊîØ‰ªò
                </button>
                <button type="button" class="btn btn-success" id="alipayPayBtn" onclick="processAlipayPayment()" style="display: none;">
                    ËÅîÁ≥ªÂÆ¢ÊúçÊîØ‰ªò
                </button>
                <button type="button" class="btn btn-secondary" onclick="editOrder()">
                    ‰øÆÊîπËÆ¢Âçï
                </button>
            </div>
        </div>
    </div>

    <!-- ÂÜÖËÅîÊîØ‰ªòËØ¶ÊÉÖÂå∫Âüü -->
    <div class="payment-details-section" id="paymentDetailsSection" style="display: none;">
        <div class="purchase-form">
            <h3 style="color: var(--color-primary); text-align: center; margin-bottom: var(--spacing-2xl);">
                <i class="fas fa-credit-card" style="margin-right: var(--spacing-sm);"></i>
                USDT ÊîØ‰ªòËØ¶ÊÉÖ
            </h3>
            
            <!-- ËÆ¢Âçï‰ø°ÊÅØ -->
            <div class="payment-info-grid" style="margin-bottom: var(--spacing-2xl);">
                <div class="info-card">
                    <label>ËÆ¢ÂçïÂè∑:</label>
                    <span id="paymentOrderId">-</span>
                </div>
                <div class="info-card">
                    <label>ÂèëÁ•®ID:</label>
                    <span id="paymentInvoiceId">-</span>
                </div>
                <div class="info-card">
                    <label>ÊîØ‰ªòÈáëÈ¢ù:</label>
                    <span id="paymentAmount">-</span>
                </div>
                <div class="info-card">
                    <label>ÊîØ‰ªòÂú∞ÂùÄ:</label>
                    <span id="paymentAddress" style="word-break: break-all; font-size: var(--font-size-sm);">-</span>
                </div>
            </div>
            
            <!-- ‰∫åÁª¥Á†ÅÂíåÂú∞ÂùÄÊòæÁ§∫ -->
            <div class="qr-payment-container">
                <div class="qr-code-section" style="margin: 0 auto; text-align: center;">
                    <h4 style="color: var(--color-primary); text-align: center;">Êâ´ÊèèÊîØ‰ªò</h4>
                    <div class="qr-container">
                        <img id="paymentQRCode" src="" alt="ÊîØ‰ªò‰∫åÁª¥Á†Å" style="max-width: 200px; width: 100%; border-radius: var(--radius-md); display: none;">
                        <div id="qrLoading" class="loading-placeholder">
                            <div class="loading"></div>
                            Ê≠£Âú®ÁîüÊàêÊîØ‰ªò‰ø°ÊÅØ...
                        </div>
                    </div>
                    <div class="payment-status" style="margin-top: var(--spacing-lg);">
                        üí° ÊèêÁ§∫Ôºö‰ΩøÁî®USDTÈí±ÂåÖÊâ´Êèè‰∫åÁª¥Á†ÅÂÆåÊàêÊîØ‰ªò
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: var(--spacing-lg);">
                <p style="color: var(--color-text-muted); font-size: var(--font-size-sm);">
                    ÊîØ‰ªòÂÆåÊàêÂêéÊàë‰ª¨‰ºöËá™Âä®Á°ÆËÆ§Âπ∂ÂèëÈÄÅË¥¶Âè∑‰ø°ÊÅØÂà∞ÊÇ®ÁöÑÈÇÆÁÆ±
                </p>
            </div>
        </div>
    </div>

    <!-- ÂæÆ‰ø°‰∫åÁª¥Á†ÅÂºπÁ™ó -->
    <div class="qrcode-modal" id="qrcodeModal">
        <div class="qrcode-content">
            <h3>ËÅîÁ≥ªÂÆ¢ÊúçÊîØ‰ªò</h3>
            <div style="text-align: center;">
                <img src="../assets/images/wechat_qrcode.jpeg" alt="ÂæÆ‰ø°ÂÆ¢Êúç‰∫åÁª¥Á†Å" style="max-width: 200px; border-radius: var(--radius-md);">
                <div style="margin-top: var(--spacing-lg);">
                    <h4 style="color: var(--color-primary);">Êâ´Á†ÅÊ∑ªÂä†ÂÆ¢ÊúçÂæÆ‰ø°</h4>
                    <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">
                        ÂÆ¢Êúç‰ºöÂºïÂØºÊÇ®‰ΩøÁî®ÊîØ‰ªòÂÆùÂè£‰ª§Á∫¢ÂåÖÂÆåÊàêÊîØ‰ªò
                    </p>
                    <div style="background: var(--color-warning-light); padding: var(--spacing-md); border-radius: var(--radius-md); margin-top: var(--spacing-md);">
                        <small style="color: var(--color-warning-dark);">
                            üí° ÊèêÁ§∫ÔºöÂàõÂª∫Â•ΩÂè£‰ª§Á∫¢ÂåÖÂêéÔºåÂ∞ÜÂè£‰ª§ÂèëÈÄÅÁªôÂÆ¢ÊúçÂç≥ÂèØÂÆåÊàêÊîØ‰ªò
                        </small>
                    </div>
                </div>
            </div>
            
            <button class="close-modal" onclick="closeQRCodeModal()">ÂÖ≥Èó≠</button>
        </div>
    </div>

        </div>
    </section>

    <!-- JavaScript Êñá‰ª∂ÂºïÁî® -->
    <script src="../assets/js/navigation.js"></script>
    <script src="../assets/js/api-config.js"></script>
    <script src="../assets/js/theme-toggle.js"></script>
    <script src="../assets/js/common.js"></script>
    
    <script>
        // ÂÖ®Â±ÄÂèòÈáè
        let products = [];
        let selectedProduct = null;
        let quantity = 1;
        let paymentMethod = null;
        let usdtToCnyRate = 8.0;

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            initializeEventListeners();
            initializeThemeAwareElements();
        });

        // ÂàùÂßãÂåñ‰∏ªÈ¢òÊÑüÁü•ÂÖÉÁ¥†
        function initializeThemeAwareElements() {
            // ÁõëÂê¨‰∏ªÈ¢òÂèòÊõ¥‰∫ã‰ª∂
            window.addEventListener('themeChanged', function(e) {
                console.log('‰∏ªÈ¢òÂ∑≤ÂàáÊç¢:', e.detail.theme);
                // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏ªÈ¢òÂàáÊç¢ÂêéÁöÑÁâπÊÆäÂ§ÑÁêÜ
            });
        }

        // Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÂäüËÉΩ
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent || element.innerText;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    // ÊòæÁ§∫Â§çÂà∂ÊàêÂäüÊèêÁ§∫
                    showCopySuccess();
                }).catch(err => {
                    console.error('Â§çÂà∂Â§±Ë¥•:', err);
                    fallbackCopyToClipboard(text);
                });
            } else {
                fallbackCopyToClipboard(text);
            }
        }

        // Â§áÁî®Â§çÂà∂ÊñπÊ≥ï
        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess();
            } catch (err) {
                console.error('Â§çÂà∂Â§±Ë¥•:', err);
                alert('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Â§çÂà∂');
            }
            
            document.body.removeChild(textArea);
        }

        // ÊòæÁ§∫Â§çÂà∂ÊàêÂäüÊèêÁ§∫
        function showCopySuccess() {
            // ÂàõÂª∫‰∏¥Êó∂ÊèêÁ§∫ÂÖÉÁ¥†
            const toast = document.createElement('div');
            toast.textContent = '‚úÖ Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø';
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--color-success);
                color: white;
                padding: var(--spacing-md) var(--spacing-lg);
                border-radius: var(--radius-md);
                box-shadow: var(--shadow-lg);
                z-index: var(--z-modal);
                font-size: var(--font-size-sm);
                animation: slideInRight 0.3s ease-out;
            `;
            
            document.body.appendChild(toast);
            
            // 3ÁßíÂêéÁßªÈô§
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease-in';
                setTimeout(() => {
                    if (toast.parentNode) {
                        document.body.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // Ê∑ªÂä†Âä®ÁîªÊ†∑Âºè
        if (!document.getElementById('toast-animations')) {
            const style = document.createElement('style');
            style.id = 'toast-animations';
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                
                @keyframes slideOutRight {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // Âä†ËΩΩ‰∫ßÂìÅÊï∞ÊçÆ
        async function loadProducts() {
            try {
                // Ëé∑ÂèñÊ±áÁéáËÆæÁΩÆ
                await loadSiteSettings();
                
                // Âä†ËΩΩ‰∫ßÂìÅ
                const apiBaseUrl = window.apiConfig ? window.apiConfig.getBaseUrl() : '/api';
                const response = await fetch(`${apiBaseUrl}/products`);
                
                if (response.ok) {
                    products = await response.json();
                    console.log('‚úÖ ‰∫ßÂìÅÊï∞ÊçÆÂä†ËΩΩÊàêÂäü:', products);
                    renderProducts();
                } else {
                    throw new Error('APIËØ∑Ê±ÇÂ§±Ë¥•');
                }
            } catch (error) {
                console.error('‚ùå Âä†ËΩΩ‰∫ßÂìÅÂ§±Ë¥•:', error);
                // ‰ΩøÁî®ÈùôÊÄÅÊï∞ÊçÆ‰Ωú‰∏∫ÂêéÂ§á
                products = getStaticProducts();
                renderProducts();
            }
        }

        // Âä†ËΩΩÁ´ôÁÇπËÆæÁΩÆËé∑ÂèñÊ±áÁéá
        async function loadSiteSettings() {
            try {
                const apiBaseUrl = window.apiConfig ? window.apiConfig.getBaseUrl() : '/api';
                const response = await fetch(`${apiBaseUrl.replace('/api', '')}/api/settings`);
                
                if (response.ok) {
                    const settings = await response.json();
                    if (settings.usdt_to_cny_rate) {
                        usdtToCnyRate = parseFloat(settings.usdt_to_cny_rate);
                        console.log('üí± Ëé∑ÂèñÊ±áÁéáËÆæÁΩÆ:', usdtToCnyRate);
                    }
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Ëé∑ÂèñÊ±áÁéáËÆæÁΩÆÂ§±Ë¥•Ôºå‰ΩøÁî®ÈªòËÆ§Ê±áÁéá:', usdtToCnyRate);
            }
        }

        // ÈùôÊÄÅ‰∫ßÂìÅÊï∞ÊçÆ‰Ωú‰∏∫ÂêéÂ§á
        function getStaticProducts() {
            return [
                {
                    name: 'AIÈ£éÊö¥ÁªÑÂêàÂ•óÈ§ê',
                    slug: 'ai-storm-combo',
                    short_description: 'ChatGPT Pro + Super Grok + Claude Max 5x ‰∏âÂêà‰∏ÄË∂ÖÂÄºÂ•óÈ§ê',
                    price_usd: 200,
                    price_unit: 'Êúà',
                    in_stock: true
                },
                {
                    name: 'ChatGPT Pro',
                    slug: 'chatgpt-pro',
                    short_description: 'OpenAI ÂÆòÊñπ Pro ÁâàÊú¨ÔºåÊó†ÈôêÂà∂ GPT-4 Turbo',
                    price_usd: 130,
                    price_unit: 'Êúà',
                    in_stock: true
                },
                {
                    name: 'Claude Max 5x',
                    slug: 'claude-max-5x',
                    short_description: 'Anthropic Claude-3 OpusÔºå5ÂÄç‰ΩøÁî®Èáè',
                    price_usd: 75,
                    price_unit: 'Êúà',
                    in_stock: true
                },
                {
                    name: 'Super Grok',
                    slug: 'super-grok',
                    short_description: 'xAI Âá∫ÂìÅÔºåXÂπ≥Âè∞Ê∑±Â∫¶Êï¥Âêà',
                    price_usd: 20,
                    price_unit: 'Êúà',
                    in_stock: true
                },
                {
                    name: 'Cursor Pro',
                    slug: 'cursor-pro',
                    short_description: 'AI-First Code EditorÔºåGPT-4 Turbo È©±Âä®',
                    price_usd: 12,
                    price_unit: 'Êúà',
                    in_stock: true
                },
                {
                    name: 'Lovable Pro 200 Credit',
                    slug: 'lovable-pro-200-credit',
                    short_description: 'AI ÂÖ®Ê†àÂ∫îÁî®ÂºÄÂèëÂπ≥Âè∞ÔºåÂø´ÈÄüÂéüÂûã‰∏éÈÉ®ÁΩ≤',
                    price_usd: 35,
                    price_unit: '200 Credit',
                    in_stock: true
                }
            ];
        }

        // Ê∏≤Êüì‰∫ßÂìÅÂàóË°®
        function renderProducts() {
            const productGrid = document.getElementById('productGrid');
            
            if (products.length === 0) {
                productGrid.innerHTML = '<div style="text-align: center; color: var(--color-text-muted); grid-column: 1 / -1;">ÊöÇÊó†ÂèØÁî®‰∫ßÂìÅ</div>';
                return;
            }

            productGrid.innerHTML = products.map(product => {
                // Ê†πÊçÆ‰∫ßÂìÅslugÁ°ÆÂÆöÂõæÊ†áÁ±ª
                let iconClass = 'icon-default';
                if (product.slug.includes('chatgpt')) iconClass = 'icon-chatgpt';
                else if (product.slug.includes('claude')) iconClass = 'icon-claude';
                else if (product.slug.includes('grok')) iconClass = 'icon-grok';
                else if (product.slug.includes('cursor')) iconClass = 'icon-cursor';
                else if (product.slug.includes('lovable')) iconClass = 'icon-lovable';
                else if (product.slug.includes('combo') || product.slug.includes('storm')) iconClass = 'icon-combo';
                
                // Â¶ÇÊûúÊòØÈªòËÆ§ÂõæÊ†áÔºåÊòæÁ§∫‰∫ßÂìÅÂêçÈ¶ñÂ≠óÊØç
                const iconContent = iconClass === 'icon-default' ? 
                    `<div class="product-icon ${iconClass}">${product.name.charAt(0)}</div>` :
                    `<div class="product-icon ${iconClass}"></div>`;

                // Â∫ìÂ≠òÁä∂ÊÄÅÂíåÊèêÈÜí
                let stockInfo = '';
                let stockWarning = '';
                const stockQuantity = product.stock_quantity || 0;
                
                if (!product.in_stock || stockQuantity === 0) {
                    stockInfo = '<div style="color: #FF5252; font-size: 0.9rem; margin-top: 0.5rem; font-weight: 600;">‚ùå ÊöÇÊó∂Áº∫Ë¥ß</div>';
                } else {
                    // ÊòæÁ§∫Â∫ìÂ≠òÊï∞Èáè
                    stockInfo = `<div style="color: #4CAF50; font-size: 0.9rem; margin-top: 0.5rem;">üì¶ Â∫ìÂ≠ò: ${stockQuantity} ‰∏™</div>`;
                    
                    // Â∫ìÂ≠òÁ¥ßÂº†ÊèêÈÜíÔºàÂ∞è‰∫é5Êó∂Ôºâ
                    if (stockQuantity < 5) {
                        stockWarning = `<div style="color: #FF9800; font-size: 0.85rem; margin-top: 0.3rem; background: rgba(255, 152, 0, 0.1); padding: 0.3rem 0.5rem; border-radius: 4px; border-left: 3px solid #FF9800;">‚ö†Ô∏è Â∫ìÂ≠òÁ¥ßÂº†Ôºå‰ªÖÂâ© ${stockQuantity} ‰∏™ÔºåËØ∑Â∞ΩÈÄü‰∏ãÂçïÔºÅ</div>`;
                    }
                }

                return `
                    <label class="product-option ${!product.in_stock || stockQuantity === 0 ? 'out-of-stock' : ''}" for="product_${product.slug}">
                        <input type="radio" id="product_${product.slug}" name="product" value="${product.slug}" onchange="selectProduct('${product.slug}')" ${!product.in_stock || stockQuantity === 0 ? 'disabled' : ''}>
                        ${iconContent}
                        <div class="product-title">${product.name}</div>
                        <div class="product-description">${product.short_description || product.description || ''}</div>
                        <div class="product-price">$${product.price_usd} USDT/${product.price_unit}</div>
                        <div class="product-price-rmb">‚âà ¬•${Math.round(product.price_usd * usdtToCnyRate)}/${product.price_unit}</div>
                        ${stockInfo}
                        ${stockWarning}
                    </label>
                `;
            }).join('');
        }

        // ÈÄâÊã©‰∫ßÂìÅ
        function selectProduct(slug) {
            selectedProduct = products.find(p => p.slug === slug);
            
            // Êõ¥Êñ∞UIÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.product-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`label[for="product_${slug}"]`).classList.add('selected');
            
            console.log('ÈÄâÊã©‰∫ßÂìÅ:', selectedProduct);
        }

        // ‰øÆÊîπÊï∞Èáè
        function changeQuantity(delta) {
            const input = document.getElementById('quantityInput');
            const newValue = parseInt(input.value) + delta;
            
            if (newValue >= 1 && newValue <= 5) {
                input.value = newValue;
                quantity = newValue;
                
                // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
                document.getElementById('decreaseBtn').disabled = newValue <= 1;
                document.getElementById('increaseBtn').disabled = newValue >= 5;
            }
        }

        // ÂàùÂßãÂåñ‰∫ã‰ª∂ÁõëÂê¨Âô®
        function initializeEventListeners() {
            // ÊîØ‰ªòÊñπÂºèÈÄâÊã©
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    paymentMethod = this.value;
                    
                    // Êõ¥Êñ∞UIÈÄâ‰∏≠Áä∂ÊÄÅ
                    document.querySelectorAll('.payment-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    this.closest('.payment-option').classList.add('selected');
                    
                    console.log('ÈÄâÊã©ÊîØ‰ªòÊñπÂºè:', paymentMethod);
                });
            });

            // Êï∞ÈáèËæìÂÖ•Ê°ÜÁõëÂê¨
            document.getElementById('quantityInput').addEventListener('input', function() {
                const value = parseInt(this.value);
                if (value >= 1 && value <= 5) {
                    quantity = value;
                    document.getElementById('decreaseBtn').disabled = value <= 1;
                    document.getElementById('increaseBtn').disabled = value >= 5;
                }
            });
        }

        // ÁîüÊàêËÆ¢Âçï
        function generateOrder() {
            // È™åËØÅË°®Âçï
            const email = document.getElementById('emailInput').value;
            
            if (!selectedProduct) {
                alert('ËØ∑ÈÄâÊã©‰∏Ä‰∏™AI‰∫ßÂìÅ');
                return;
            }
            
            if (!paymentMethod) {
                alert('ËØ∑ÈÄâÊã©ÊîØ‰ªòÊñπÂºè');
                return;
            }
            
            if (!email || !isValidEmail(email)) {
                alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈÇÆÁÆ±Âú∞ÂùÄ');
                return;
            }

            // ËÆ°ÁÆóÊÄª‰ª∑
            const totalUSDT = selectedProduct.price_usd * quantity;
            const totalRMB = Math.round(totalUSDT * usdtToCnyRate);

            // Êõ¥Êñ∞ËÆ¢ÂçïÊëòË¶Å
            document.getElementById('summaryProduct').textContent = `${selectedProduct.name} √ó ${quantity}`;
            document.getElementById('summaryQuantity').textContent = `${quantity} ‰∏™`;
            document.getElementById('summaryPayment').textContent = paymentMethod === 'usdt' ? 'USDTÊîØ‰ªò' : 'ÊîØ‰ªòÂÆùÂè£‰ª§Á∫¢ÂåÖ';
            document.getElementById('summaryEmail').textContent = email;
            document.getElementById('totalUSDT').textContent = `$${totalUSDT} USDT`;
            document.getElementById('totalRMB').textContent = `‚âà ¬•${totalRMB}`;

            // ÊòæÁ§∫ÂØπÂ∫îÁöÑÊîØ‰ªòÊåâÈíÆ
            document.getElementById('usdtPayBtn').style.display = paymentMethod === 'usdt' ? 'inline-block' : 'none';
            document.getElementById('alipayPayBtn').style.display = paymentMethod === 'alipay' ? 'inline-block' : 'none';

            // ÊòæÁ§∫ËÆ¢ÂçïÊëòË¶Å
            document.getElementById('orderSummary').classList.add('show');
            
            // ÊªöÂä®Âà∞ËÆ¢ÂçïÊëòË¶Å
            document.getElementById('orderSummary').scrollIntoView({ behavior: 'smooth' });
        }

        // È™åËØÅÈÇÆÁÆ±Ê†ºÂºè
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Â§ÑÁêÜUSDTÊîØ‰ªò
        function processUSDTPayment() {
            // Á¶ÅÁî®ÊåâÈíÆÔºåÈò≤Ê≠¢ÈáçÂ§çÁÇπÂáª
            const usdtBtn = document.getElementById('usdtPayBtn');
            usdtBtn.disabled = true;
            usdtBtn.innerHTML = '<div class="loading"></div>Â§ÑÁêÜ‰∏≠...';
            
            createOrderAndPay();
        }

        // ÂàõÂª∫ËÆ¢ÂçïÂπ∂Â§ÑÁêÜÊîØ‰ªò
        async function createOrderAndPay() {
            try {
                const email = document.getElementById('emailInput').value;
                
                console.log('üöÄ ÂºÄÂßãÂàõÂª∫ËÆ¢Âçï...', {
                    product: selectedProduct.slug,
                    quantity: quantity,
                    email: email
                });
                
                // Á¨¨‰∏ÄÊ≠•ÔºöÂàõÂª∫ËÆ¢Âçï
                const apiBaseUrl = window.apiConfig ? window.apiConfig.getBaseUrl() : '/api';
                const orderPayload = {
                    customer_email: email,
                    product_slug: selectedProduct.slug,
                    quantity: quantity
                };
                
                console.log('üì§ ÂèëÈÄÅËÆ¢ÂçïÊï∞ÊçÆ:', orderPayload);
                
                const createOrderResponse = await fetch(`${apiBaseUrl}/create-order`, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(orderPayload)
                });
                
                console.log('üì• ËÆ¢ÂçïÂàõÂª∫ÂìçÂ∫îÁä∂ÊÄÅ:', createOrderResponse.status);
                
                if (!createOrderResponse.ok) {
                    const errorText = await createOrderResponse.text();
                    console.error('‚ùå ËÆ¢ÂçïÂàõÂª∫Â§±Ë¥•ÂìçÂ∫î:', errorText);
                    
                    // Â∞ùËØïËß£ÊûêJSONÈîôËØØ
                    let errorMessage = `ËÆ¢ÂçïÂàõÂª∫Â§±Ë¥• (${createOrderResponse.status})`;
                    try {
                        const errorData = JSON.parse(errorText);
                        if (errorData.error) {
                            errorMessage = errorData.error;
                        }
                    } catch (e) {
                        // Â¶ÇÊûú‰∏çÊòØJSONÔºå‰ΩøÁî®ÂéüÂßãÊñáÊú¨
                        errorMessage = errorText || errorMessage;
                    }
                    
                    throw new Error(errorMessage);
                }
                
                const orderData = await createOrderResponse.json();
                console.log('‚úÖ ËÆ¢ÂçïÂàõÂª∫ÂìçÂ∫îÊï∞ÊçÆ:', orderData);
                
                if (!orderData.success) {
                    throw new Error(orderData.error || 'ÂàõÂª∫ËÆ¢ÂçïÂ§±Ë¥•');
                }
                
                console.log('‚úÖ ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü:', orderData);
                
                // ‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑËÆ¢ÂçïID
                const finalOrderId = orderData.order_id;
                
                // Á¨¨‰∫åÊ≠•ÔºöÁîüÊàêOxaPayÊîØ‰ªòÈìæÊé•
                const paymentPayload = {
                    orderId: finalOrderId
                };
                
                console.log('üì§ ÂèëÈÄÅÊîØ‰ªòËØ∑Ê±Ç:', paymentPayload);
                
                const oxapayResponse = await fetch(`${apiBaseUrl}/oxapay-payment`, {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(paymentPayload)
                });
                
                console.log('üì• ÊîØ‰ªòÂìçÂ∫îÁä∂ÊÄÅ:', oxapayResponse.status);
                
                if (!oxapayResponse.ok) {
                    const errorText = await oxapayResponse.text();
                    console.error('‚ùå ÊîØ‰ªòËØ∑Ê±ÇÂ§±Ë¥•ÂìçÂ∫î:', errorText);
                    
                    // Â∞ùËØïËß£ÊûêJSONÈîôËØØ
                    let errorMessage = `ÊîØ‰ªòËØ∑Ê±ÇÂ§±Ë¥• (${oxapayResponse.status})`;
                    try {
                        const errorData = JSON.parse(errorText);
                        if (errorData.error) {
                            errorMessage = errorData.error;
                        }
                    } catch (e) {
                        // Â¶ÇÊûú‰∏çÊòØJSONÔºå‰ΩøÁî®ÂéüÂßãÊñáÊú¨
                        errorMessage = errorText || errorMessage;
                    }
                    
                    throw new Error(errorMessage);
                }
                
                const payData = await oxapayResponse.json();
                console.log('‚úÖ ÊîØ‰ªòÂìçÂ∫îÊï∞ÊçÆ:', payData);
                
                if (!payData.success) {
                    // ÊîπËøõÈîôËØØÂ§ÑÁêÜÔºö‰∏∫Â∏∏ËßÅÈîôËØØÊèê‰æõÊõ¥ÂèãÂ•ΩÁöÑÊèêÁ§∫
                    let userFriendlyError = payData.error || 'ÁîüÊàêÊîØ‰ªòÈìæÊé•Â§±Ë¥•';
                    
                    // Â¶ÇÊûúÊòØAPIÂØÜÈí•Áõ∏ÂÖ≥ÈîôËØØÔºå‰ΩÜÂú®ÂºÄÂèëÁéØÂ¢É‰∏≠ÔºåÊèê‰æõÊõ¥ÂèãÂ•ΩÁöÑÊèêÁ§∫
                    if (userFriendlyError.includes('APIÂØÜÈí•Êú™ÈÖçÁΩÆ') || userFriendlyError.includes('ÂØÜÈí•Êó†Êïà')) {
                        userFriendlyError = 'ÊîØ‰ªòÊúçÂä°ÊöÇÊó∂‰∏çÂèØÁî®ÔºåËØ∑Á®çÂêéÈáçËØïÊàñËÅîÁ≥ªÂÆ¢Êúç';
                    }
                    
                    throw new Error(userFriendlyError);
                }
                
                console.log('‚úÖ ÊîØ‰ªòÈìæÊé•ÁîüÊàêÊàêÂäü:', payData);
                
                // Á¨¨‰∏âÊ≠•ÔºöÊòæÁ§∫ÂÜÖËÅîÊîØ‰ªòËØ¶ÊÉÖÔºàËÄå‰∏çÊòØË∑≥ËΩ¨È°µÈù¢Ôºâ
                if (payData.payLink || payData.qrCode || payData.payAddress) {
                    // ÊòæÁ§∫ÊîØ‰ªòÊàêÂäüÂàõÂª∫ÁöÑÊèêÁ§∫
                    alert(`ËÆ¢ÂçïÂàõÂª∫ÊàêÂäüÔºÅ\nËÆ¢ÂçïÂè∑: ${finalOrderId}\nËØ∑Âú®‰∏ãÊñπÂÆåÊàêUSDTÊîØ‰ªò„ÄÇ`);
                    
                    // ÊòæÁ§∫ÂÜÖËÅîÊîØ‰ªòËØ¶ÊÉÖ
                    showInlinePaymentDetails(finalOrderId, payData);
                } else {
                    throw new Error('ÊîØ‰ªòÈìæÊé•ÁîüÊàêÂ§±Ë¥•');
                }
                
            } catch (error) {
                console.error('‚ùå ÊîØ‰ªòÂ§ÑÁêÜÈîôËØØ:', error);
                alert(`ÊîØ‰ªòÂ§ÑÁêÜÂ§±Ë¥•: ${error.message}\n\nËØ∑Á®çÂêéÈáçËØïÊàñËÅîÁ≥ªÂÆ¢Êúç„ÄÇ`);
                
                // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
                const usdtBtn = document.getElementById('usdtPayBtn');
                usdtBtn.disabled = false;
                usdtBtn.innerHTML = 'ÂâçÂæÄOxaPayÊîØ‰ªò';
            }
        }

        // ÊòæÁ§∫ÂÜÖËÅîÊîØ‰ªòËØ¶ÊÉÖ
        function showInlinePaymentDetails(orderId, payData) {
            console.log('üéØ ÊòæÁ§∫ÊîØ‰ªòËØ¶ÊÉÖ:', payData);
            
            // Â°´ÂÖÖÊîØ‰ªò‰ø°ÊÅØ
            document.getElementById('paymentOrderId').textContent = orderId;
            document.getElementById('paymentInvoiceId').textContent = payData.trackId || orderId;
            document.getElementById('paymentAmount').textContent = `${payData.payAmount || '0'} ${payData.payCurrency || 'USDT'}`;
            
            // Â§ÑÁêÜ‰∫åÁª¥Á†ÅÊòæÁ§∫
            const qrImg = document.getElementById('paymentQRCode');
            const qrLoading = document.getElementById('qrLoading');
            
            if (payData.qrCode) {
                // Êúâ‰∫åÁª¥Á†Å - Ê†áÂáÜÊòæÁ§∫
                qrImg.src = payData.qrCode;
                qrImg.style.display = 'block';
                qrLoading.style.display = 'none';
                console.log('‚úÖ ‰∫åÁª¥Á†ÅÂèØÁî®');
            } else {
                // Êó†‰∫åÁª¥Á†Å - ÊòæÁ§∫ÊîØ‰ªòÈìæÊé•ÊàñÂµåÂÖ•ÊîØ‰ªòÈ°µÈù¢
                qrImg.style.display = 'none';
                
                if (payData.payLink) {
                    // ÂàõÂª∫iframeÂµåÂÖ•ÊîØ‰ªòÈ°µÈù¢
                    qrLoading.innerHTML = `
                        <div class="payment-iframe-container">
                            <div class="iframe-header">
                                <i class="fas fa-shield-alt"></i> OxaPay ÂÆâÂÖ®ÊîØ‰ªòÈ°µÈù¢ - ÂèØÁõ¥Êé•Âú®‰∏ãÊñπÂÆåÊàêÊîØ‰ªò
                            </div>
                            <iframe 
                                id="paymentIframe"
                                src="${payData.payLink}" 
                                class="payment-iframe"
                                title="OxaPay ÊîØ‰ªòÈ°µÈù¢"
                                allow="payment; camera; microphone; encrypted-media; geolocation; clipboard-read; clipboard-write"
                                sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation allow-top-navigation-by-user-activation allow-downloads allow-storage-access-by-user-activation"
                                onload="handleIframeLoad()"
                                onerror="handleIframeError()">
                            </iframe>
                            <div class="iframe-fallback" style="display: none;" id="iframeFallback">
                                <p style="color: #888; margin-bottom: 15px;">
                                    <i class="fas fa-exclamation-triangle"></i> 
                                    Êó†Ê≥ïÂä†ËΩΩÂµåÂÖ•ÊîØ‰ªòÈ°µÈù¢
                                </p>
                                <button onclick="openPaymentPage('${payData.payLink}')" 
                                        class="payment-link-btn"
                                        style="
                                            background: linear-gradient(135deg, #00E5FF 0%, #0091EA 100%);
                                            color: white;
                                            border: none;
                                            padding: 12px 25px;
                                            border-radius: 8px;
                                            font-size: 16px;
                                            font-weight: bold;
                                            cursor: pointer;
                                            box-shadow: 0 4px 15px rgba(0, 229, 255, 0.3);
                                            transition: all 0.3s ease;
                                        "
                                        onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(0, 229, 255, 0.4)'"
                                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(0, 229, 255, 0.3)'">
                                    <i class="fas fa-external-link-alt"></i> Âú®Êñ∞Á™óÂè£ÊâìÂºÄÊîØ‰ªòÈ°µÈù¢
                                </button>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 10px;">
                            <button onclick="openPaymentPage('${payData.payLink}')" 
                                    class="btn btn-secondary" style="font-size: 12px; padding: 8px 15px;">
                                <i class="fas fa-external-link-alt"></i> Âú®Êñ∞Á™óÂè£ÊâìÂºÄ
                            </button>
                            <button onclick="refreshPaymentIframe()" 
                                    class="btn btn-secondary" style="font-size: 12px; padding: 8px 15px; margin-left: 10px;">
                                <i class="fas fa-sync"></i> Âà∑Êñ∞È°µÈù¢
                            </button>
                        </div>
                        <div style="background: rgba(0, 229, 255, 0.1); border: 1px solid rgba(0, 229, 255, 0.3); 
                                   border-radius: 8px; padding: 15px; margin-top: 15px; text-align: center;">
                            <p style="color: #00E5FF; margin: 0; font-size: 14px;">
                                <i class="fas fa-info-circle"></i> 
                                ÊÇ®ÂèØ‰ª•Áõ¥Êé•Âú®‰∏äÊñπÈ°µÈù¢‰∏≠ÈÄâÊã©ÊîØ‰ªòÊñπÂºèÂÆåÊàê‰ªòÊ¨æÔºåÊó†ÈúÄË∑≥ËΩ¨Âà∞ÂÖ∂‰ªñÁ™óÂè£
                            </p>
                        </div>
                    `;
                    
                    // Ë∞ÉÊï¥Â∏ÉÂ±Ä‰ª•ÈÄÇÂ∫îiframe
                    const qrSection = document.querySelector('.qr-code-section');
                    const qrContainer = document.querySelector('.qr-container');
                    if (qrSection) qrSection.classList.add('iframe-mode');
                    if (qrContainer) qrContainer.classList.add('iframe-container');
                    
                    console.log('üñºÔ∏è ÂµåÂÖ•ÊîØ‰ªòÈ°µÈù¢iframe:', payData.payLink);
                } else {
                    // Êó†‰∫åÁª¥Á†Å‰πüÊó†ÊîØ‰ªòÈìæÊé•
                    qrLoading.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <p style="color: #f44336;"><i class="fas fa-times-circle"></i> ÊîØ‰ªòÈìæÊé•ÁîüÊàêÂ§±Ë¥•</p>
                            <p style="color: #999; font-size: 14px;">ËØ∑ËÅîÁ≥ªÂÆ¢ÊúçËé∑ÂèñÂ∏ÆÂä©</p>
                        </div>
                    `;
                    console.log('‚ùå Êó†‰∫åÁª¥Á†Å‰πüÊó†ÊîØ‰ªòÈìæÊé•');
                }
            }
            
            // Â¶ÇÊûúÂµåÂÖ•‰∫ÜiframeÔºåÂêØÂä®Ë∂ÖÊó∂Ê£ÄÊµã
            if (payData.payLink && !payData.qrCode) {
                checkIframeLoadTimeout();
            }
            
            // Ê∑ªÂä†Ë≠¶Âëä‰ø°ÊÅØÔºàÂ¶ÇÊûúÊúâÔºâ
            if (payData.warning) {
                const warningDiv = document.createElement('div');
                warningDiv.style.cssText = `
                    background: #fff3cd;
                    border: 1px solid #ffeaa7;
                    color: #856404;
                    padding: 10px;
                    border-radius: 5px;
                    margin: 15px 0;
                    font-size: 14px;
                `;
                warningDiv.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i> 
                    <strong>Ê≥®ÊÑè:</strong> ${payData.warning}
                `;
                
                // ÊèíÂÖ•Âà∞ÊîØ‰ªòËØ¶ÊÉÖÂå∫ÂüüÁöÑÂºÄÂ§¥
                const detailsSection = document.getElementById('paymentDetailsSection');
                const firstChild = detailsSection.querySelector('.payment-details-content');
                if (firstChild) {
                    firstChild.insertBefore(warningDiv, firstChild.firstChild);
                }
            }
            
            // Ë∞ÉËØï‰ø°ÊÅØËæìÂá∫
            if (payData.debug) {
                console.log('üîç Ë∞ÉËØï‰ø°ÊÅØ:', payData.debug);
                console.log('üìã ÂèØÁî®Â≠óÊÆµ:', payData.debug.available_fields);
                console.log('‚ùå Áº∫Â§±Â≠óÊÆµ:', payData.debug.missing_fields);
            }
            
            // ÊòæÁ§∫ÊîØ‰ªòËØ¶ÊÉÖÂå∫Âüü
            document.getElementById('paymentDetailsSection').style.display = 'block';
            
            // ÊªöÂä®Âà∞ÊîØ‰ªòËØ¶ÊÉÖ
            document.getElementById('paymentDetailsSection').scrollIntoView({ behavior: 'smooth' });
            
            // Â≠òÂÇ®ÂΩìÂâçËÆ¢ÂçïIDÁî®‰∫éÁä∂ÊÄÅÊ£ÄÊü•
            window.currentOrderId = orderId;
            window.currentPayData = payData; // Â≠òÂÇ®ÊîØ‰ªòÊï∞ÊçÆÁî®‰∫éË∞ÉËØï
            
            console.log('‚úÖ ÊîØ‰ªòËØ¶ÊÉÖÊòæÁ§∫ÂÆåÊàê');
        }
        
        // ÊâìÂºÄÊîØ‰ªòÈ°µÈù¢
        function openPaymentPage(payLink) {
            if (!payLink) {
                alert('ÊîØ‰ªòÈìæÊé•Êó†ÊïàÔºåËØ∑ËÅîÁ≥ªÂÆ¢Êúç');
                return;
            }
            
            console.log('üîó ÊâìÂºÄÊîØ‰ªòÈìæÊé•:', payLink);
            
            // Âú®Êñ∞Á™óÂè£ÊâìÂºÄÊîØ‰ªòÈ°µÈù¢
            const payWindow = window.open(payLink, '_blank', 'width=800,height=600,scrollbars=yes');
            
            if (!payWindow) {
                // Â¶ÇÊûúÂºπÁ™óË¢´ÈòªÊ≠¢ÔºåÂ∞ùËØïÁõ¥Êé•Ë∑≥ËΩ¨
                if (confirm('Êó†Ê≥ïÊâìÂºÄÊñ∞Á™óÂè£ÔºåÊòØÂê¶Âú®ÂΩìÂâçÈ°µÈù¢Ë∑≥ËΩ¨Âà∞ÊîØ‰ªòÈ°µÈù¢Ôºü\n\nÂÆåÊàêÊîØ‰ªòÂêéËØ∑ËøîÂõûÊú¨È°µÈù¢„ÄÇ')) {
                    window.location.href = payLink;
                }
            } else {
                // ÁõëÂê¨ÊîØ‰ªòÁ™óÂè£ÂÖ≥Èó≠ÔºåÊèêÁ§∫Áî®Êà∑Ê£ÄÊü•ÊîØ‰ªòÁä∂ÊÄÅ
                const checkClosed = setInterval(() => {
                    if (payWindow.closed) {
                        clearInterval(checkClosed);
                        // ÊîØ‰ªòÁ™óÂè£ÂÖ≥Èó≠Âêé‰∏çÂÜçÊ£ÄÊü•ÊîØ‰ªòÁä∂ÊÄÅÔºåÁõ¥Êé•ÊèêÁ§∫Áî®Êà∑ËÅîÁ≥ªÂÆ¢Êúç
                        alert('ÊîØ‰ªòÁ™óÂè£Â∑≤ÂÖ≥Èó≠„ÄÇ\n\nÂ¶ÇÊûúÊÇ®Â∑≤ÂÆåÊàêÊîØ‰ªòÔºåËØ∑ËÅîÁ≥ªÂÆ¢ÊúçÁ°ÆËÆ§ËÆ¢ÂçïÁä∂ÊÄÅ„ÄÇ\nÊîØ‰ªòÂÆåÊàêÂêéÊàë‰ª¨‰ºöÂ∞ΩÂø´Â§ÑÁêÜÊÇ®ÁöÑËÆ¢Âçï„ÄÇ');
                    }
                }, 1000);
            }
        }

        // Â§ÑÁêÜÊîØ‰ªòÂÆùÊîØ‰ªò
        function processAlipayPayment() {
            // ÊòæÁ§∫ÂæÆ‰ø°‰∫åÁª¥Á†ÅÂºπÁ™ó
            document.getElementById('qrcodeModal').style.display = 'flex';
        }

        // ÂÖ≥Èó≠‰∫åÁª¥Á†ÅÂºπÁ™ó
        function closeQRCodeModal() {
            document.getElementById('qrcodeModal').style.display = 'none';
        }

        // ‰øÆÊîπËÆ¢Âçï
        function editOrder() {
            document.getElementById('orderSummary').classList.remove('show');
            document.querySelector('.purchase-form').scrollIntoView({ behavior: 'smooth' });
        }

        // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠
        document.getElementById('qrcodeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQRCodeModal();
            }
        });

        // ESCÈîÆÂÖ≥Èó≠ÂºπÁ™ó
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeQRCodeModal();
            }
        });

        // Â§ÑÁêÜiframeÂä†ËΩΩÊàêÂäü
        function handleIframeLoad() {
            console.log('‚úÖ ÊîØ‰ªòÈ°µÈù¢iframeÂä†ËΩΩÊàêÂäü');
            
            // ÈöêËóèÂä†ËΩΩÊåáÁ§∫Âô®ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ
            const loadingIndicator = document.getElementById('iframeLoadingIndicator');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
            
            // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏Ä‰∫õÂä†ËΩΩÊàêÂäüÁöÑÊèêÁ§∫
            const iframe = document.getElementById('paymentIframe');
            if (iframe) {
                // ÁªôiframeÊ∑ªÂä†‰∏Ä‰∏™ÊàêÂäüÂä†ËΩΩÁöÑÊ†áËØÜ
                iframe.setAttribute('data-loaded', 'true');
                
                // Ê∑ªÂä†‰∏Ä‰∏™subtleÁöÑËßÜËßâÊèêÁ§∫Ë°®Á§∫È°µÈù¢Â∑≤Âä†ËΩΩ
                iframe.style.opacity = '1';
                iframe.style.transition = 'opacity 0.3s ease';
            }
            
            // ÁõëÂê¨iframeÂÜÖÁöÑÊîØ‰ªòÂÆåÊàê‰∫ã‰ª∂ÔºàÂ¶ÇÊûúOxaPayÊîØÊåÅpostMessageÔºâ
            window.addEventListener('message', function(event) {
                // È™åËØÅÊ∂àÊÅØÊù•Ê∫ê
                if (event.origin !== 'https://pay.oxapay.com') {
                    return;
                }
                
                console.log('Êî∂Âà∞iframeÊ∂àÊÅØ:', event.data);
                
                // Â§ÑÁêÜÊîØ‰ªòÂÆåÊàêÊ∂àÊÅØ
                if (event.data && event.data.type === 'payment_completed') {
                    console.log('üéâ iframeÈÄöÁü•ÊîØ‰ªòÂÆåÊàê');
                    // ÊîØ‰ªòÂÆåÊàêÈÄöËøáoxapayÈ°µÈù¢Ëá™Âä®Â§ÑÁêÜÔºå‰∏çÂÜçÊâãÂä®Ê£ÄÊü•Áä∂ÊÄÅ
                    alert('ÊîØ‰ªòÂ∑≤ÂÆåÊàêÔºÅÊàë‰ª¨‰ºöÂ∞ΩÂø´Â§ÑÁêÜÊÇ®ÁöÑËÆ¢Âçï„ÄÇ');
                }
            });
        }

        // Â§ÑÁêÜiframeÂä†ËΩΩÈîôËØØ
        function handleIframeError() {
            console.error('‚ùå ÊîØ‰ªòÈ°µÈù¢iframeÂä†ËΩΩÂ§±Ë¥•');
            
            // ÊòæÁ§∫fallbackÈÄâÈ°π
            const fallback = document.getElementById('iframeFallback');
            const iframe = document.getElementById('paymentIframe');
            
            if (fallback && iframe) {
                iframe.style.display = 'none';
                fallback.style.display = 'block';
            }
        }

        // Ê£ÄÊµãiframeÊòØÂê¶ÁúüÊ≠£Âä†ËΩΩÊàêÂäüÔºàË∂ÖÊó∂Ê£ÄÊµãÔºâ
        function checkIframeLoadTimeout() {
            setTimeout(() => {
                const iframe = document.getElementById('paymentIframe');
                if (iframe && !iframe.getAttribute('data-loaded')) {
                    console.warn('‚ö†Ô∏è iframeÂä†ËΩΩË∂ÖÊó∂ÔºåÊòæÁ§∫fallback');
                    handleIframeError();
                }
            }, 10000); // 10ÁßíË∂ÖÊó∂
        }

        // Âà∑Êñ∞iframeÔºàÈáçÊñ∞Âä†ËΩΩÊîØ‰ªòÈ°µÈù¢Ôºâ
        function refreshPaymentIframe() {
            const iframe = document.getElementById('paymentIframe');
            if (iframe && window.currentPayData && window.currentPayData.payLink) {
                console.log('üîÑ Âà∑Êñ∞ÊîØ‰ªòÈ°µÈù¢iframe');
                iframe.src = window.currentPayData.payLink + '?refresh=' + Date.now();
            }
        }
    </script>

    <!-- È°µËÑö -->
    <footer class="main-footer">
        <div class="container">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 32px; margin-bottom: 32px;">
                <div>
                    <h4 class="text-primary font-semibold mb-lg">AIStorm</h4>
                    <p class="text-secondary text-sm">
                        ÊàêÂìÅÂè∑ÁßüÁî®, Áã¨‰∫´Âπ≥Âè∞, 24Â∞èÊó∂ÂÜÖ‰∫§‰ªò
                    </p>
                </div>
                <div>
                    <h4 class="font-semibold text-primary mb-lg">‰∫ßÂìÅ</h4>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <a href="chatgpt.html" class="text-secondary text-sm hover:text-primary transition-colors">ChatGPT Pro</a>
                        <a href="claude.html" class="text-secondary text-sm hover:text-primary transition-colors">Claude Max 5x</a>
                        <a href="grok.html" class="text-secondary text-sm hover:text-primary transition-colors">Super Grok</a>
                        <a href="cursor.html" class="text-secondary text-sm hover:text-primary transition-colors">Cursor Pro</a>
                        <a href="lovable.html" class="text-secondary text-sm hover:text-primary transition-colors">Lovable Pro</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold text-primary mb-lg">ÊîØÊåÅ</h4>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <a href="support.html" class="text-secondary text-sm hover:text-primary transition-colors">ÊäÄÊúØÊîØÊåÅ</a>
                        <a href="tutorials.html" class="text-secondary text-sm hover:text-primary transition-colors">‰ΩøÁî®ÊïôÁ®ã</a>
                        <a href="faq.html" class="text-secondary text-sm hover:text-primary transition-colors">Â∏∏ËßÅÈóÆÈ¢ò</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold text-primary mb-lg">Ê≥ïÂæã</h4>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <a href="terms.html" class="text-secondary text-sm hover:text-primary transition-colors">ÊúçÂä°Êù°Ê¨æ</a>
                        <a href="privacy.html" class="text-secondary text-sm hover:text-primary transition-colors">ÈöêÁßÅÊîøÁ≠ñ</a>
                        <a href="refund.html" class="text-secondary text-sm hover:text-primary transition-colors">ÈÄÄÊ¨æÊîøÁ≠ñ</a>
                    </div>
                </div>
            </div>
            
            <div style="border-top: 1px solid var(--color-border); padding-top: 24px; text-align: center;">
                <p class="text-secondary text-sm">
                    ¬© 2025 AIStorm Team SwiftLingu ‰øùÁïôÊâÄÊúâÊùÉÂà©„ÄÇ
                </p>
            </div>
        </div>
    </footer>
</body>
</html> 